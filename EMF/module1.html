<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Module 1: Mathematical Foundations - EMF Course</title>
    
    <!-- CSS -->
    <link rel="stylesheet" href="../assets/css/styles.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap">
    
    <!-- MathJax Configuration -->
    <script>
    MathJax = {
        tex: {
            inlineMath: [['$', '$'], ['\\(', '\\)']],
            displayMath: [['$$', '$$'], ['\\[', '\\]']],
            packages: ['base', 'ams', 'noerrors', 'noundefined']
        }
    };
    </script>
    <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js" async></script>
    
    <!-- Three.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/OrbitControls/2.0.0/OrbitControls.js"></script>
</head>
<body>
    <div class="module-container">
        <!-- Module Header -->
        <h1>Module 1: Mathematical Foundations</h1>
        
        <!-- Section 1: Introduction -->
        <section class="section">
            <h2>1.1 Introduction to Vector Calculus</h2>
            <p>Welcome to the first module of our Electromagnetic Fields course. Before diving into electromagnetic theory, we need to establish a strong foundation in vector calculus, which is essential for understanding field theory.</p>
            
            <div class="learning-objectives">
                <h3>Learning Objectives:</h3>
                <ul>
                    <li>Understand 3D vectors and their components</li>
                    <li>Master vector operations (addition, dot product, cross product)</li>
                    <li>Learn vector calculus operations (gradient, divergence, curl)</li>
                    <li>Apply vector analysis in different coordinate systems</li>
                </ul>
            </div>
        </section>

        <!-- Section 2: Vector Basics -->
        <section class="section">
            <h2>1.2 Vector Basics and Operations</h2>
            
            <div class="math-container">
                <h3>Vector Definition</h3>
                <p>A vector in 3D space can be represented as:</p>
                $$\vec{A} = A_x\hat{i} + A_y\hat{j} + A_z\hat{k}$$
            </div>

            <!-- Interactive Vector Visualization -->
            <div class="interactive-container">
                <h3>Interactive Vector Visualization</h3>
                <div class="vector-controls">
                    <div class="vector-input">
                        <label for="x-component">X:</label>
                        <input type="number" id="x-component" value="1" step="0.1">
                    </div>
                    <div class="vector-input">
                        <label for="y-component">Y:</label>
                        <input type="number" id="y-component" value="1" step="0.1">
                    </div>
                    <div class="vector-input">
                        <label for="z-component">Z:</label>
                        <input type="number" id="z-component" value="1" step="0.1">
                    </div>
                    <button onclick="updateVector()">Update Vector</button>
                </div>
                <div class="canvas-container">
                    <div id="vector-canvas"></div>
                    <div class="viz-controls">
                        <button onclick="resetView()">Reset View</button>
                        <button onclick="toggleGrid()">Toggle Grid</button>
                    </div>
                </div>
            </div>

            <!-- Vector Operations -->
            <div class="example-box">
                <h3>Vector Operations</h3>
                <div class="math-container">
                    <h4>Dot Product</h4>
                    $$\vec{A} \cdot \vec{B} = A_xB_x + A_yB_y + A_zB_z = |\vec{A}||\vec{B}|\cos\theta$$
                    
                    <h4>Cross Product</h4>
                    $$\vec{A} \times \vec{B} = \begin{vmatrix} 
                    \hat{i} & \hat{j} & \hat{k} \\
                    A_x & A_y & A_z \\
                    B_x & B_y & B_z
                    \end{vmatrix}$$
                </div>
            </div>
        </section>

        <!-- Section 3: Vector Calculus -->
        <section class="section">
            <h2>1.3 Vector Calculus Operations</h2>
            
            <div class="math-container">
                <h3>Gradient</h3>
                <p>The gradient of a scalar field φ is:</p>
                $$\nabla \phi = \frac{\partial \phi}{\partial x}\hat{i} + \frac{\partial \phi}{\partial y}\hat{j} + \frac{\partial \phi}{\partial z}\hat{k}$$
                
                <h3>Divergence</h3>
                <p>The divergence of a vector field is:</p>
                $$\nabla \cdot \vec{A} = \frac{\partial A_x}{\partial x} + \frac{\partial A_y}{\partial y} + \frac{\partial A_z}{\partial z}$$
                
                <h3>Curl</h3>
                <p>The curl of a vector field is:</p>
                $$\nabla \times \vec{A} = \begin{vmatrix}
                \hat{i} & \hat{j} & \hat{k} \\
                \frac{\partial}{\partial x} & \frac{\partial}{\partial y} & \frac{\partial}{\partial z} \\
                A_x & A_y & A_z
                \end{vmatrix}$$
            </div>
        </section>

        <!-- Section 4: Practice Problems -->
        <section class="section">
            <h2>1.4 Practice Problems</h2>
            
            <div class="practice-problem">
                <h3>Problem 1: Vector Operations</h3>
                <p>Given vectors $\vec{A} = 2\hat{i} + 3\hat{j} + \hat{k}$ and $\vec{B} = \hat{i} - 2\hat{j} + 4\hat{k}$, calculate:</p>
                <ol>
                    <li>$\vec{A} \cdot \vec{B}$</li>
                    <li>$\vec{A} \times \vec{B}$</li>
                </ol>
                <button onclick="toggleSolution('solution1')">Show/Hide Solution</button>
                <div id="solution1" class="solution">
                    <div class="math-container">
                        <h4>Solution:</h4>
                        <p>1. Dot Product:</p>
                        $$\vec{A} \cdot \vec{B} = (2)(1) + (3)(-2) + (1)(4) = 2 - 6 + 4 = 0$$
                        <p>2. Cross Product:</p>
                        $$\vec{A} \times \vec{B} = 14\hat{i} - 7\hat{j} - 7\hat{k}$$
                    </div>
                </div>
            </div>
        </section>

        <!-- Navigation -->
        <div class="progress-nav">
            <button onclick="previousModule()" class="nav-btn">← Previous</button>
            <button onclick="nextModule()" class="nav-btn">Next →</button>
        </div>
    </div>

    <!-- JavaScript for Vector Visualization and Interactions -->
    <script>
        // Three.js Scene Setup
        let scene, camera, renderer, controls;
        let vectorArrow, gridHelper;

        function initScene() {
            scene = new THREE.Scene();
            camera = new THREE.PerspectiveCamera(75, window.innerWidth / 400, 0.1, 1000);
            
            renderer = new THREE.WebGLRenderer({ antialias: true });
            renderer.setSize(document.querySelector('.canvas-container').offsetWidth, 400);
            renderer.setClearColor(0xf8fafc);
            document.getElementById('vector-canvas').appendChild(renderer.domElement);
            
            // Add grid
            gridHelper = new THREE.GridHelper(10, 10);
            scene.add(gridHelper);
            
            // Add axes
            const axesHelper = new THREE.AxesHelper(5);
            scene.add(axesHelper);
            
            // Setup camera
            camera.position.set(3, 3, 3);
            camera.lookAt(0, 0, 0);
            
            // Add controls
            controls = new THREE.OrbitControls(camera, renderer.domElement);
            controls.enableDamping = true;
            
            // Create initial vector
            createVector(1, 1, 1);
            
            animate();
        }

        function createVector(x, y, z) {
            if (vectorArrow) scene.remove(vectorArrow);
            
            const dir = new THREE.Vector3(x, y, z);
            const origin = new THREE.Vector3(0, 0, 0);
            const length = dir.length();
            dir.normalize();
            
            const arrowHelper = new THREE.ArrowHelper(
                dir,
                origin,
                length,
                0x2563eb, // Primary color
                0.2, // Head length
                0.1  // Head width
            );
            scene.add(arrowHelper);
            vectorArrow = arrowHelper;
            
            // Update equation display
            updateVectorEquation(x, y, z);
        }

        function updateVector() {
            const x = parseFloat(document.getElementById('x-component').value);
            const y = parseFloat(document.getElementById('y-component').value);
            const z = parseFloat(document.getElementById('z-component').value);
            createVector(x, y, z);
        }

        function updateVectorEquation(x, y, z) {
            const equation = `\\vec{v} = ${x}\\hat{i} + ${y}\\hat{j} + ${z}\\hat{k}`;
            document.getElementById('vector-equation').innerHTML = `$$${equation}$$`;
            MathJax.typeset();
        }

        function resetView() {
            camera.position.set(3, 3, 3);
            camera.lookAt(0, 0, 0);
            controls.reset();
        }

        function toggleGrid() {
            gridHelper.visible = !gridHelper.visible;
        }

        function animate() {
            requestAnimationFrame(animate);
            controls.update();
            renderer.render(scene, camera);
        }

        function toggleSolution(solutionId) {
            const solution = document.getElementById(solutionId);
            solution.style.display = solution.style.display === 'none' ? 'block' : 'none';
        }

        // Navigation functions
        function previousModule() {
            // Add navigation logic
        }

        function nextModule() {
            // Add navigation logic
        }

        // Initialize scene
        window.onload = initScene;

        // Handle window resize
        window.addEventListener('resize', onWindowResize, false);

        function onWindowResize() {
            const container = document.querySelector('.canvas-container');
            camera.aspect = container.offsetWidth / 400;
            camera.updateProjectionMatrix();
            renderer.setSize(container.offsetWidth, 400);
        }
    </script>
</body>
</html>